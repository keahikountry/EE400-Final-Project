# EE400 Final Project - Arduino Computer Vision with Edge Impulse

This project implements real-time person detection using computer vision and machine learning on an Arduino Nano 33 BLE Sense microcontroller with an OV7675 camera module.

## Hardware Requirements

- Arduino Nano 33 BLE Sense
- OV7675 Camera Module (160x120 resolution)
- USB cable for programming and power

## Software Requirements

- Arduino IDE 2.0 or later
- Edge Impulse Arduino library (`FinalProject3_inferencing`)
- Arduino OV767X camera library

## Project Structure

```
├── nano_ble33_sense_camera/
│   └── nano_ble33_sense_camera.ino    # Main camera inference sketch
├── sketch_aug15b/
│   └── sketch_aug15b.ino              # Person detection with threshold sketch
├── output.png                          # Sample output image
├── Untitled-1.ipynb                   # Jupyter notebook (if any)
└── README.md                          # This file
```

## Features

### Main Camera Sketch (`nano_ble33_sense_camera.ino`)
- Captures images at 160x120 resolution
- Performs machine learning inference using Edge Impulse
- Outputs classification results via serial communication

### Person Detection Sketch (`sketch_aug15b.ino`)
- Specialized for person detection
- Configurable threshold (default: 50%)
- Periodic capture and inference (every 2 seconds)
- Outputs detection confidence scores

## Getting Started

### 1. Hardware Setup
1. Connect the OV7675 camera module to the Arduino Nano 33 BLE Sense
2. Connect the Arduino to your computer via USB

### 2. Software Setup
1. Install Arduino IDE 2.0+
2. Install the Arduino Nano 33 BLE board package
3. Install required libraries:
   - `Arduino_OV767X` library
   - Edge Impulse generated library (`FinalProject3_inferencing`)

### 3. Upload and Run
1. Open either sketch in Arduino IDE
2. Select the correct board and port
3. Upload the sketch
4. Open Serial Monitor to view output

## Configuration

### Person Detection Parameters
```cpp
#define POS_LABEL        "person"     // Positive class label
#define PERSON_THRESH    0.50f        // 50% confidence threshold
#define LOOP_PERIOD_MS   2000         // Capture interval in milliseconds
```

### Camera Parameters
```cpp
#define EI_CAMERA_RAW_FRAME_BUFFER_COLS 160  // Image width
#define EI_CAMERA_RAW_FRAME_BUFFER_ROWS 120  // Image height
```

## Output Format

The system outputs detection results via serial communication:
- Classification confidence scores
- Detection timestamps
- Image data (when threshold is exceeded)

## Troubleshooting

### Common Issues
1. **Camera initialization failed**: Check camera module connections
2. **Memory allocation errors**: Try defining `EI_CLASSIFIER_ALLOCATION_STATIC` in `boards.local.txt`
3. **Low inference accuracy**: Retrain the Edge Impulse model with more diverse data

### Memory Optimization
If you encounter memory issues, consider:
- Using static memory allocation
- Reducing image buffer size
- Optimizing the Edge Impulse model

## Development

### VS Code Setup
This project includes VS Code configuration for Arduino development:
- Arduino extension support
- C/C++ IntelliSense
- Integrated serial monitor

### Edge Impulse Integration
The machine learning model is generated by Edge Impulse and integrated as a library. To update the model:
1. Train your model in Edge Impulse Studio
2. Download the Arduino library
3. Replace the `FinalProject3_inferencing` library

## License

This project uses the Edge Impulse Arduino library, which is licensed under the Apache License 2.0.

## Author

EE400 Final Project - Electrical Engineering Computer Vision Implementation
